.grid {
    display: grid;
    grid-template-columns: repeat(28, 1fr);
    gap: 0;
    width: min(90vmin, 560px);
    height: min(90vmin, 560px);
    background: #000022;
    margin: 12px auto;
    border-radius: 8px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.6), inset 0 0 30px rgba(0,0,0,0.4);
}

.grid div {
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

/* pac-dots */
.pac-dot {
    background: radial-gradient(circle at 40% 40%, #fff 20%, transparent 22%), transparent;
    background-color: transparent;
}

/* walls */
.wall {
    background: linear-gradient(#0033aa, #002288);
    box-shadow: inset 0 -4px 8px rgba(0,0,0,0.4);
    border-radius: 3px;
}

.power-pellet {
    background: radial-gradient(circle at 50% 50%, #ffd54d 0%, #ffb300 60%);
    border-radius: 50%;
    box-shadow: 0 1px 4px rgba(255, 180, 0, 0.6);
}

/* ghosts base */
.ghost {
    position: relative;
}
.ghost::before {
    content: "";
    position: absolute;
    left: 10%;
    right: 10%;
    top: 0;
    height: 70%;
    border-radius: 50% 50% 20% 20% / 50% 50% 0 0;
    box-shadow: inset -6px -6px 12px rgba(0,0,0,0.2);
}
.ghost::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 6%;
    right: 6%;
    height: 30%;
    background: repeating-linear-gradient(90deg, transparent 0 10%, rgba(0,0,0,0.06) 10% 20%);
    border-radius: 0 0 8px 8px;
}

.blinky::before { background: #ff3b3b; }
.pinky::before { background: #ff8fb3; }
.inky::before { background: #6fe9ff; }
.clyde::before { background: #ffb86b; }

/* scared state */
.scared-ghost::before { background: #9ad4ff !important; }
.scared-ghost.blink { background: #ffffff; }

/* Pac-Man */
.pac-man {
    position: relative;
    background: radial-gradient(circle at 30% 30%, #fff 6%, #ffea00 30%, #ffd700 60%);
    border-radius: 50%;
    overflow: hidden;
}
 
/* boca - usamos um pseudo-elemento rotacionado conforme direção */
.pac-man::before {
    content: "";
    position: absolute;
    left: 50%; top: 50%;
    width: 48%; height: 48%;
    transform: translate(-50%, -50%) rotate(0deg);
    background: #000022;
    clip-path: polygon(50% 50%, 100% 20%, 100% 80%);
    transform-origin: 50% 50%;
    transition: transform 120ms, opacity 120ms;
    opacity: 0;
}

/* quando 'mouth-open' está presente, mostramos a overlay e rotacionamos conforme direção */
.pac-man.mouth-open.dir-right::before { opacity: 1; transform: translate(-50%, -50%) rotate(35deg); }
.pac-man.mouth-open.dir-left::before { opacity: 1; transform: translate(-50%, -50%) rotate(-145deg); }
.pac-man.mouth-open.dir-up::before { opacity: 1; transform: translate(-50%, -50%) rotate(-55deg); }
.pac-man.mouth-open.dir-down::before { opacity: 1; transform: translate(-50%, -50%) rotate(125deg); }

/* eye for Pac-Man */
.pac-man .eye {
    position: absolute;
    width: 12%;
    height: 12%;
    background: #000022;
    border-radius: 50%;
    top: 30%;
    right: 34%;
    box-shadow: 0 1px 0 rgba(255,255,255,0.08) inset;
}

/* slightly larger and brighter Pac-Man */
.pac-man { box-shadow: 0 2px 8px rgba(0,0,0,0.4), inset -6px -6px 12px rgba(255,220,0,0.05); }

/* pac-man flash when power is ending */
.pac-man.flash { animation: pacman-flash 260ms steps(1) infinite; }
@keyframes pacman-flash {
    0% { opacity: 1 }
    50% { opacity: 0.15 }
    100% { opacity: 1 }
}

/* scared ghost blink animation */
.scared-ghost.blink {
    animation: ghost-blink 300ms steps(1) infinite;
}
@keyframes ghost-blink {
    0% { filter: brightness(1) }
    50% { filter: brightness(2) }
    100% { filter: brightness(1) }
}

/* Eyes for ghosts */
.ghost .eyes {
    position: absolute;
    top: 22%;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    display: flex;
    justify-content: space-between;
}
.ghost .pupil {
    width: 34%;
    height: 34%;
    background: #ffffff;
    border-radius: 50%;
    position: relative;
    box-shadow: inset -3px -3px 6px rgba(0,0,0,0.2);
}
.ghost .pupil::after {
    content: '';
    position: absolute;
    width: 36%;
    height: 36%;
    background: #000022;
    border-radius: 50%;
    left: 32%;
    top: 32%;
    transition: transform 120ms;
}

/* pupils look direction by moving the inner dot */
.dir-left .pupil::after { transform: translateX(-40%); }
.dir-right .pupil::after { transform: translateX(40%); }
.dir-up .pupil::after { transform: translateY(-40%); }
.dir-down .pupil::after { transform: translateY(40%); }

/* slight skirt for ghost body to look classic */
.ghost::after { border-radius: 0 0 6px 6px; }

/* HUD and layout */
body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: linear-gradient(#07132a, #02101a); color: #fff; margin: 0; }
.hud { display:flex; justify-content:space-between; align-items:center; padding:8px 12px; max-width:760px; margin:10px auto 0; }
.hud h1 { margin:0; font-size:1.1rem; letter-spacing:1px }
.score { font-weight:600 }
.actions button { background:#ffea00; border:0; padding:6px 10px; border-radius:6px; cursor:pointer }

.game-area { max-width:760px; margin: 8px auto; padding: 6px; }

.controls { display:none; max-width:560px; margin:8px auto; text-align:center; }
.controls button { min-width:48px; min-height:48px; margin:6px; border-radius:8px; border:none; background: rgba(255,255,255,0.08); color:#fff; font-size:18px }

@media (max-width:700px) {
    .controls { display:block }
    .hud { padding:6px; }
}

.legend { text-align:center; font-size:0.85rem; opacity:0.8; padding-bottom:14px }
